"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const url = tslib_1.__importStar(require("url"));
module.exports = {
    name: "command",
    afters: ["auth"],
    befores: ["fix", "directory", "static", "end"],
    _fromFile: true,
    body: async function body(req, res, event) {
        let uri = new url.URL(`http://127.0.0.1:${event.server.opts.port}${req.url}`);
        if (uri.pathname === "/kill") {
            res.end("DONE");
            event.stop();
            await event.server.data["parent"].cmds.find(cmd => cmd.name === "kill").body();
        }
        return event.pass();
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWFuZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9taWRkbGV3YXJlcy9jb21tYW5kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVBLGlEQUEyQjtBQUUzQixNQUFNLENBQUMsT0FBTyxHQUFHO0lBQ2hCLElBQUksRUFBRSxTQUFTO0lBQ2YsTUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDO0lBQ2hCLE9BQU8sRUFBRSxDQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBRTtJQUNoRCxTQUFTLEVBQUUsSUFBSTtJQUNmLElBQUksRUFBRSxLQUFLLFVBQVUsSUFBSSxDQUFDLEdBQXlCLEVBQUUsR0FBd0IsRUFBRSxLQUF3QjtRQUN0RyxJQUFJLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUU5RSxJQUFJLEdBQUcsQ0FBQyxRQUFRLEtBQUssT0FBTyxFQUFFO1lBQzdCLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDaEIsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2IsTUFBTSxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUMvRTtRQUVELE9BQU8sS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3JCLENBQUM7Q0FDRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgaHR0cCBmcm9tIFwiaHR0cFwiO1xyXG5pbXBvcnQgKiBhcyB2c2VydiBmcm9tIFwidmFsZS1zZXJ2ZXItaWlcIjtcclxuaW1wb3J0ICogYXMgdXJsIGZyb20gXCJ1cmxcIjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cdG5hbWU6IFwiY29tbWFuZFwiLFxyXG5cdGFmdGVyczogW1wiYXV0aFwiXSxcclxuXHRiZWZvcmVzOiBbIFwiZml4XCIsIFwiZGlyZWN0b3J5XCIsIFwic3RhdGljXCIsIFwiZW5kXCIgXSxcclxuXHRfZnJvbUZpbGU6IHRydWUsXHJcblx0Ym9keTogYXN5bmMgZnVuY3Rpb24gYm9keShyZXE6IGh0dHAuSW5jb21pbmdNZXNzYWdlLCByZXM6IGh0dHAuU2VydmVyUmVzcG9uc2UsIGV2ZW50OiB2c2Vydi5DbGFzc2VzLmV2dCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0bGV0IHVyaSA9IG5ldyB1cmwuVVJMKGBodHRwOi8vMTI3LjAuMC4xOiR7ZXZlbnQuc2VydmVyLm9wdHMucG9ydH0ke3JlcS51cmx9YCk7XHJcblx0XHRcclxuXHRcdGlmICh1cmkucGF0aG5hbWUgPT09IFwiL2tpbGxcIikge1xyXG5cdFx0XHRyZXMuZW5kKFwiRE9ORVwiKTtcclxuXHRcdFx0ZXZlbnQuc3RvcCgpO1xyXG5cdFx0XHRhd2FpdCBldmVudC5zZXJ2ZXIuZGF0YVtcInBhcmVudFwiXS5jbWRzLmZpbmQoY21kID0+IGNtZC5uYW1lID09PSBcImtpbGxcIikuYm9keSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBldmVudC5wYXNzKCk7XHJcblx0fVxyXG59O1xyXG4iXX0=